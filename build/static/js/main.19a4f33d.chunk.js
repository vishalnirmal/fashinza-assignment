(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{46:function(e,t,a){},49:function(e,t,a){},52:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(21),c=a.n(n),s=a(5),o=a(3),i=a(17),u=a(15),d="ADD_NAME_FILTER",l="ADD_CATEGORY_FILTER",p="ADD_PRICE_FILTER",f="REMOVE_FILTER",j=a(6),m=(a(46),a(1));var b=function(){var e=Object(j.b)(),t=Object(r.useState)(""),a=Object(u.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)({min:"",max:""}),b=Object(u.a)(o,2),O=b[0],h=b[1],_=Object(j.c)((function(e){return e.categories})),x=_.loading,y=_.error,g=_.categories,v=Object(j.c)((function(e){return e.filter}));Object(r.useEffect)((function(){0===Object.keys(v).length?(c(""),h({min:"",max:""})):(v.name&&c(v.name),v.min&&h((function(e){return Object(s.a)(Object(s.a)({},e),{},{min:v.min})})),v.max&&h((function(e){return Object(s.a)(Object(s.a)({},e),{},{max:v.max})})))}),[v]);var E=function(e){h((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))},S=function(t){e(function(e){return{type:l,payload:e}}(t))};return Object(m.jsxs)("div",{className:"filter",children:[Object(m.jsxs)("form",{className:"filter__search",onSubmit:function(t){t.preventDefault(),e(function(e){return{type:d,payload:e}}(n))},children:[Object(m.jsx)("input",{type:"text",className:"filter__search__input",label:"name",name:"name",id:"name",value:n,onChange:function(e){c(e.target.value)},placeholder:"Search",autoComplete:"off"}),Object(m.jsx)("button",{type:"submit",className:"filter__search__button",children:Object(m.jsx)("i",{className:"fas fa-search"})})]}),Object(m.jsxs)("div",{className:"filter__category",children:[Object(m.jsx)("h4",{className:"filter__category__heading",children:"Filter by category"}),Object(m.jsx)("div",{className:"filter__category__list",children:x?Object(m.jsx)("h2",{children:"Loading"}):y?Object(m.jsx)("h2",{children:"Unable to fetch list of categories"}):g.length?g.map((function(e,t){return Object(m.jsxs)("p",{className:(v.category===e._id?"selected":"")+" filter__category__list__item",onClick:function(){return S(e._id)},children:[e._id," ",Object(m.jsxs)("span",{children:["(",e.count,")"]})]},t)})):Object(m.jsx)("h2",{children:"No categories to show"})})]}),Object(m.jsxs)("form",{className:"filter__price",onSubmit:function(t){t.preventDefault(),e(function(e){return{type:p,payload:e}}(O))},children:[Object(m.jsx)("input",{type:"number",className:"filter__price__input",label:"min",name:"min",id:"min",value:O.min,onChange:E,placeholder:"Min",autoComplete:"off"}),Object(m.jsx)("input",{type:"number",className:"filter__price__input",label:"max",name:"max",id:"max",value:O.max,onChange:E,placeholder:"Max",autoComplete:"off"}),Object(m.jsx)("button",{type:"submit",className:"filter__price__button",children:"Apply"})]}),Object(m.jsx)("button",{className:"filter__reset",onClick:function(){e({type:f}),c(""),h({min:"",max:""})},children:"Reset Filters"})]})},O=a(4),h=a.n(O),_=a(7),x=a(14);a(49);function y(e){var t=e.name,a=e.description,n=e.price,c=e.category,s=e._id,o=e.deleteProduct,i=Object(r.useState)(!1),d=Object(u.a)(i,2),l=d[0],p=d[1];return Object(m.jsxs)("div",{className:"product",children:[Object(m.jsx)("h2",{className:"product__name",children:t}),Object(m.jsx)("p",{className:"product__category",children:c}),Object(m.jsx)("p",{className:"product__description",children:a}),Object(m.jsxs)("p",{className:"product__price",children:["\u20b9 ",Object(m.jsx)("span",{children:n})]}),Object(m.jsx)("i",{className:(l?"fa-times":"fa-ellipsis-v")+" fas product__menu-button",onClick:function(){return p(!l)}}),Object(m.jsxs)("div",{className:(l?"show":"")+" product__menu",children:[Object(m.jsx)(x.b,{to:"/update/"+s,children:Object(m.jsx)("p",{className:"product__menu__item",children:"Update"})}),Object(m.jsx)("p",{className:"product__menu__item",onClick:function(){return o(s)},children:"Delete"})]})]})}y.defaultProps={name:"Item 1",description:"This is a short description about item 1.",price:2499,category:"category1"};var g=y;a(52);var v=function(){var e=Object(j.c)((function(e){return e.product})),t=e.type,a=e.success,r=e.error;return Object(m.jsx)("h1",{className:"popup "+(r?"popup--error":"popup--success")+(a||r?" popup--show":""),children:a?t+" SUCCESFULL":r})},E="ADD_SUCCESS",S="UPDATE_SUCCESS",C="DELETE_ERROR",N="DELETE_SUCCESS",T="RESET_PRODUCT",R="FETCH_PRODUCTS_REQUEST",D="FETCH_PRODUCTS_SUCCESS",w="FETCH_PRODUCTS_ERROR",U="DELETE_PRODUCT",k="UPDATE_PRODUCT",P="ADD_PRODUCT",A=a(13),F=a.n(A),I="FETCH_CATEGORIES_REQUEST",L="FETCH_CATEGORIES_SUCCESS",M="FETCH_CATEGORIES_ERROR",G=function(){return function(){var e=Object(_.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:I}),e.prev=1,e.next=4,F()({method:"GET",url:"/products/categories"});case 4:a=e.sent,t({type:L,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:M});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},H=function(){return{type:T}},J=function(e){return function(){var t=Object(_.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F.a.delete("/products/".concat(e));case 3:a({type:N}),a({type:U,payload:e}),a(G()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a((r=t.t0.message,{type:C,payload:r}));case 11:setTimeout((function(){a(H())}),3e3);case 12:case"end":return t.stop()}var r}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};a(71);var Q=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e})),a=t.products,r=t.filter,n=a.loading,c=a.error,o=function(e){var t=e.name,a=e.min,r=e.max,n=e.category;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((function(e){return(!t||-1!==e.name.indexOf(t))&&!(a&&e.price<a)&&!(r&&e.price>r)&&(!n||e.category===n)}))}(r,a.data),i=function(){var t=Object(_.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(J(a));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"products",children:[n?Object(m.jsx)("h1",{className:"products__message",children:"Loading"}):c?Object(m.jsx)("h1",{className:"products__message",children:"Unable to load Products"}):0===o.length?Object(m.jsx)("h1",{className:"products__message",children:"No Products to show"}):o.map((function(e){return Object(m.jsx)(g,Object(s.a)(Object(s.a)({},e),{},{deleteProduct:i}),e._id)})),Object(m.jsx)(v,{})]})};a(72);var B=function(){var e=Object(j.b)();return Object(r.useEffect)((function(){var t;e((t={},function(){var e=Object(_.a)(h.a.mark((function e(a){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:R}),e.prev=1,e.next=4,F()({method:"GET",url:"/products",params:t});case 4:r=e.sent,a({type:D,payload:r.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:w});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())),e(G())}),[e]),Object(m.jsxs)("div",{className:"home",children:[Object(m.jsx)(b,{}),Object(m.jsx)(Q,{})]})};a(73);var V=function(e){return Object(m.jsxs)("div",{className:"navbar",children:[Object(m.jsx)(x.b,{to:"/",children:Object(m.jsx)("h2",{className:"navbar__heading",children:"ProductStore"})}),Object(m.jsx)(x.b,{to:"/add",children:Object(m.jsx)("p",{className:"navbar__link",children:"Add"})})]})},W="FORM_REQUEST",Y="FORM_SUCCESS",q="FORM_ERROR",z="FORM_RESET",K=function(){return{type:z}};a(74);var X=function(e){var t=Object(j.b)(),a=Object(j.c)((function(e){return e.form})),n=a.loading,c=a.error,o=a.success,d=Object(r.useState)({name:"",description:"",category:"",price:""}),l=Object(u.a)(d,2),p=l[0],f=l[1],b=e.type,O=function(){var e=Object(_.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/products/".concat(t));case 2:a=e.sent,f(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return o&&e.history.push("/"),"update"===b&&O(e.match.params.id),function(){y()}}),[o,e.history,b,e.match.params.id]);var x=function(e){f((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))},y=function(){f({name:"",description:"",category:"",price:""})};return Object(m.jsxs)("div",{className:"add",children:[Object(m.jsxs)("h2",{className:"add__heading",children:["add"===b?"Add a ":"Update"," Product"]}),c?Object(m.jsx)("h3",{className:"add__message add__message--error",children:c}):"",Object(m.jsxs)("form",{className:"add__form",onSubmit:function(e){e.preventDefault(),t(function(e,t){return function(){var a=Object(_.a)(h.a.mark((function a(r){var n,c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r({type:W}),a.prev=1,"add"!==t){a.next=10;break}return a.next=5,F.a.post("/products",e);case 5:n=a.sent,r(function(){var e=Object(_.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:E}),setTimeout((function(){t(H())}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r({type:P,payload:n.data}),a.next=15;break;case 10:return a.next=12,F.a.put("/products/".concat(e._id),e);case 12:c=a.sent,r(function(){var e=Object(_.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:S}),setTimeout((function(){t(H())}),3e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r({type:k,payload:c.data});case 15:r({type:Y,payload:"Product added succesfully"}),r(K()),a.next=22;break;case 19:a.prev=19,a.t0=a.catch(1),r({type:q,payload:a.t0.message});case 22:case"end":return a.stop()}}),a,null,[[1,19]])})));return function(e){return a.apply(this,arguments)}}()}(p,b))},children:[Object(m.jsx)("input",{type:"text",className:"add__form__input",name:"name",id:"name",value:p.name,onChange:x,placeholder:"Name",autoComplete:"off"}),Object(m.jsx)("textarea",{className:"add__form__input",cols:"30",rows:"5",name:"description",id:"description",value:p.description,onChange:x,placeholder:"Product Description"}),Object(m.jsx)("input",{type:"text",className:"add__form__input",name:"category",id:"category",value:p.category,onChange:x,placeholder:"Category",autoComplete:"off"}),Object(m.jsx)("input",{type:"number",className:"add__form__input",label:"price",name:"price",id:"price",value:p.price,onChange:x,placeholder:"Price",autoComplete:"off"}),Object(m.jsx)("button",{type:"submit",className:"add__form__button",disabled:!!n,children:n?"Loading":"add"===b?"Add":"Update"})]})]})};a(75);var Z=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Oops nothing to show here."}),Object(m.jsx)(x.b,{to:"/",children:"Go Back to Home"})]})};a(76);var $=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(V,{}),Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/",exact:!0,component:B}),Object(m.jsx)(o.a,{path:"/add",render:function(e){return Object(m.jsx)(X,Object(s.a)({type:"add"},e))}}),Object(m.jsx)(o.a,{path:"/update/:id",render:function(e){return Object(m.jsx)(X,Object(s.a)({type:"update"},e))}}),Object(m.jsx)(o.a,{path:"",component:Z})]})]})},ee=a(18),te=a(36),ae=a(37),re=a(38),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{loading:!0,error:!1};case D:return{loading:!1,error:!1,data:t.payload};case w:return{loading:!1,error:!0};case U:var a=e.data.filter((function(e){return e._id!==t.payload}));return{loading:!1,error:!1,data:a};case P:return{loading:!1,error:!1,data:a=[].concat(Object(re.a)(e.data),[t.payload])};case k:return{loading:!1,error:!1,data:a=e.data.map((function(e){return e._id===t.payload._id?t.payload:e}))};default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a={};switch(t.type){case d:return a=Object(s.a)(Object(s.a)({},e),{},{name:t.payload}),localStorage.setItem("filter",JSON.stringify(a)),a;case l:return a=Object(s.a)(Object(s.a)({},e),{},{category:t.payload}),localStorage.setItem("filter",JSON.stringify(a)),a;case p:return a=Object(s.a)({},e),t.payload.min?a.min=t.payload.min:delete a.min,t.payload.max?a.max=t.payload.max:delete a.max,localStorage.setItem("filter",JSON.stringify(a)),a;case f:return localStorage.setItem("filter",JSON.stringify({})),{};default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{categories:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0};case L:return{loading:!1,categories:t.payload};case M:return{loading:!1,error:!0};default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{loading:!0};case Y:return{loading:!1,success:t.payload};case q:return{loading:!1,error:t.payload};case z:return{};default:return e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{success:!0,type:"ADD"};case S:return{success:!0,type:"UPDATE"};case N:return{success:!0,type:"DELETE"};case C:return{success:!1,error:t.payload,type:"DELETE"};case T:return{};default:return e}},ue=Object(ee.combineReducers)({products:ne,filter:ce,categories:se,form:oe,product:ie}),de={products:{data:[]},filter:{}};de.filter=localStorage.getItem("filter")?JSON.parse(localStorage.getItem("filter")):{};var le=Object(ee.createStore)(ue,de,Object(te.composeWithDevTools)(Object(ee.applyMiddleware)(ae.a)));a(77);c.a.render(Object(m.jsx)(x.a,{children:Object(m.jsx)(j.a,{store:le,children:Object(m.jsx)($,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.19a4f33d.chunk.js.map